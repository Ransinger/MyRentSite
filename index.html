<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ממוצע שכר דירה בתל אביב</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />
    <style>
        body {
            direction: rtl;
            font-family: Arial, sans-serif;
        }
        table {
            direction: rtl;
        }
        th, td {
            text-align: right;
        }
        .language-selector {
            position: absolute;
            top: 10px;
            left: 10px;
            display: flex;
            gap: 10px;
        }
        .language-selector button {
            background: rgba(255, 255, 255, 0.8);
            border: 1px solid #ddd;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            transition: 0.3s;
        }
        .language-selector button:hover {
            background: #ddd;
        }
        #map {
            height: 400px;
            width: 100%;
            margin-top: 20px;
            border-radius: 10px;
            border: 1px solid #ddd;
        }
    </style>
</head>
<body>
    <header>
        <div class="logo-container">
            <h1 class="header-title" data-lang="title">ממוצע שכר דירה בתל אביב</h1>
        </div>
        <div class="language-selector">
            <button data-lang="he">עברית</button>
            <button data-lang="en">English</button>
        </div>
    </header>
    <main class="content-container">
        <div id="map"></div>
    </main>
    <script>
        // יצירת המפה והגדרת המיקום ההתחלתי בתל אביב
        var map = L.map('map').setView([32.0853, 34.7818], 13);
        
        // הוספת שכבת מפה מבוססת OpenStreetMap
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; OpenStreetMap contributors'
        }).addTo(map);
        
        // הוספת גיאוקודר (חיפוש כתובות והצגתן על המפה)
        var geocoder = L.Control.geocoder({
            defaultMarkGeocode: false
        }).on('markgeocode', function(e) {
            var latlng = e.geocode.center;
            map.setView(latlng, 16); // זום אוטומטי לרחוב שנמצא
            L.marker(latlng).addTo(map); // הוספת מרקר על הרחוב
        }).addTo(map);
        
        // שינוי שפה לפי בחירת המשתמש
        const langButtons = document.querySelectorAll('.language-selector button');
        langButtons.forEach(button => {
            button.addEventListener('click', () => {
                const lang = button.dataset.lang;
                translateText(lang);
            });
        });

        // פונקציה להחלפת הטקסט באתר בהתאם לשפה שנבחרה
        function translateText(lang) {
            const elements = document.querySelectorAll('[data-lang]');
            const translations = {
                he: { title: 'ממוצע שכר דירה בתל אביב' },
                en: { title: 'Average rent in Tel Aviv' }
            };
            elements.forEach(element => {
                const key = element.dataset.lang;
                if (translations[lang] && translations[lang][key]) {
                    element.textContent = translations[lang][key];
                }
            });
        }
    </script>
</body>
</html>
